<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>update</title>

    
  </head>
  <body>




    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="//www.parsecdn.com/js/parse-1.4.0.min.js"></script>
    <script>

    

      Parse.initialize("C4zgFUST9RGWSJ5scVpyB5G4co2gcMUpNPg0QpaI", "C7Qy33Kz3SbWwNOoodEg6RiuIE7a4MlvoYo99kTZ")

      $(function() {

        /*

        var MyBook = Parse.Object.extend("MyBook")
        var query = new Parse.Query(MyBook)
        query.exists("transactionCount")
        // query.notEqualTo("deleted", true)
        query.find({
          success: function(l) {

            for (var i = 0; i < l.length; i++) {


              Parse.Cloud.run('updateMyBookCounters', { myBookId: l[i].id }, {
                success: function(object) {
                  if(object != null){

                    console.log("done: "+object.id+", "+object.get("transactionCount"))
                  }else{
                    console.log(object)
                  }
                },
                error: function(e) {

                }
              })

              
            }

          },
          error: function(e) {

          }
        })

        
        var Book = Parse.Object.extend("Book")
        var query = new Parse.Query(Book)
        query.exists("wantsCount")
        query.find({
          success: function(l) {

            for (var i = 0; i < l.length; i++) {
                    // console.log("done: "+l[i].id+", "+l[i].get("wantsCount"))

              Parse.Cloud.run('updateBookCounters', 
                { id: l[i].id , type: "WANT"}, {
                success: function(object) {
                  if(object != null){

                    console.log("done: "+object.id+", "+object.get("wantsCount"))
                  }else{
                    console.log(object)
                  }
                },
                error: function(e) {

                }
              })

              
            }

          },
          error: function(e) {
            console.log(e)
          }
        })

      })
  /**/

  </script>

  </body>
    
</html>